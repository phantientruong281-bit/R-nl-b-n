<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Game</title>

<style>
body{
 margin:0;
 background:#111827;
 color:white;
 font-family:sans-serif;
 text-align:center;
}

h1{margin:10px}

canvas{
 background:#020617;
 border:2px solid #38bdf8;
}

.controls{
 margin-top:14px;
 display:grid;
 grid-template-columns:80px 80px 80px;
 grid-template-rows:80px 80px 80px;
 gap:6px;
 justify-content:center;
}

.controls button{
 width:80px;
 height:80px;
 font-size:36px;
 font-weight:bold;
 border-radius:6px;
 background:#6b7280;
 color:white;
 border:3px solid #374151;
 display:flex;
 align-items:center;
 justify-content:center;
 box-shadow:0 4px #111827;
}

.controls button:active{
 transform:translateY(4px);
 box-shadow:0 0 #111827;
}

#over{
 position:fixed;
 inset:0;
 background:rgba(0,0,0,.7);
 display:none;
 align-items:center;
 justify-content:center;
 flex-direction:column;
}

#over button{
 margin-top:15px;
 font-size:22px;
 padding:12px 26px;
}

</style>
</head>

<body>

<h1>üêçR·∫Øn l√† bn,ko ph·∫£i t√¥i</h1>
<canvas id="game"></canvas>

<div class="controls">
  <div></div>
  <button onclick="setDir(0,-1)">‚ñ≤</button>
  <div></div>

  <button onclick="setDir(-1,0)">‚óÄ</button>
  <div></div>
  <button onclick="setDir(1,0)">‚ñ∂</button>

  <div></div>
  <button onclick="setDir(0,1)">‚ñº</button>
  <div></div>
</div>

<div id="over">
<h2>Thua r·ªìi k√¨a g√† qu√°-))</h2>
<button onclick="start()">Ch∆°i l·∫°i</button>
</div>

<audio id="eat" src="https://actions.google.com/sounds/v1/cartoon/pop.ogg"></audio>
<audio id="dead" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>

<script>
const c=document.getElementById("game");
const ctx=c.getContext("2d");
const eat=document.getElementById("eat");
const dead=document.getElementById("dead");

let size=12;
let snake,food,dx,dy,over=false;

function resize(){
 let side=Math.min(window.innerWidth-20, window.innerHeight-260);
 c.width=Math.floor(side/size)*size;
 c.height=c.width;
}
window.onresize=resize;
resize();

function rand(){
 return {
  x:Math.floor(Math.random()*(c.width/size))*size,
  y:Math.floor(Math.random()*(c.height/size))*size
 }
}

function start(){
 snake=[{x:size*4,y:size*4}];
 dx=size; dy=0;
 food=rand();
 over=false;
 document.getElementById("over").style.display="none";
}
start();

function setDir(x,y){
 if(over) return;
 if(dx===-x*size && dy===-y*size) return;
 dx=x*size;
 dy=y*size;
}

function hit(h){
 return snake.some((p,i)=>i&&p.x===h.x&&p.y===h.y);
}

function loop(){
 if(over) return;

 let h={x:snake[0].x+dx,y:snake[0].y+dy};

 if(h.x<0||h.y<0||h.x>=c.width||h.y>=c.height||hit(h)){
  over=true;
  dead.play();
  document.getElementById("over").style.display="flex";
  return;
 }

 snake.unshift(h);

 if(h.x===food.x&&h.y===food.y){
  eat.play();
  food=rand();
 } else snake.pop();

 ctx.clearRect(0,0,c.width,c.height);

 ctx.fillStyle="#22c55e";
 snake.forEach(p=>ctx.fillRect(p.x,p.y,size,size));

 ctx.fillStyle="#f97316";
 ctx.fillRect(food.x,food.y,size,size);
}

setInterval(loop,120);
</script>
</body>
</html>
